package test.liuzehua.securitydemo.controller;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.security.authentication.AuthenticationManager;import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;import org.springframework.security.core.Authentication;import org.springframework.web.bind.annotation.CrossOrigin;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import test.liuzehua.securitydemo.jwt.JwtProperties;import test.liuzehua.securitydemo.jwt.JwtTokenProvider;import test.liuzehua.securitydemo.model.User;import java.util.Arrays;/** * @author liuzehua * 2020/5/20 **/@RestController@RequestMapping("/")@CrossOriginpublic class UserController {    @Autowired    private JwtProperties jwtProperties;    @Autowired    private AuthenticationManager authenticationManager;    @Autowired    private JwtTokenProvider jwtTokenProvider;    @Value("${server.port}")    private String port;    @GetMapping("hello")    public String hello(){        //调用userdetailservice loadUserByUsername        Authentication authenticate = authenticationManager                .authenticate(new UsernamePasswordAuthenticationToken("hahahaha", "1234"));        User user = (User) authenticate.getPrincipal();        String token = jwtTokenProvider.createToken(user.getUsername(),user.getRoles());        return token;    }    @GetMapping("word")    public String word(){        return jwtProperties.toString();    }    @GetMapping("index")    public String index(){        return this.port;    }}